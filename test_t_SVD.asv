%% test t_SVD
X=double(imread('sherlock.jpg'));
X=tensor(X);
[U,S,V]=t_SVD(X);
Xhat=t_product(U,S);
Xhat=t_product(Xhat,transpose(V));
nx=norm(X);
Err=norm(calculate('minus', X, Xhat));
fprintf("t-SVD approximation achieves approximation error %d, relative error %d.\n",Err,Err/nx);
function T = transpose(T)
%Transpose transpose 3D tensor.
%
%   At = transpose(A,ORDER) transpose 3D tensor A in size of I1* by transposing
%
    if ndims(T) ~= 3
        error('Order of tensor must be 3!');
    end
    T=permute(T,[2,1,3]);
    T(:,:,2:T.size(3))=T(:,:,T.size(3):-1:2);
end
